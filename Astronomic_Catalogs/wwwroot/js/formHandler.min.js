(()=>{"use strict";({924:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function l(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))};function o(){return`\n        <tr id="spinnerTr">\n            <td colspan="${function(){const e=document.querySelector(".fieldsCheckBoks");if(!e)return 0;const t=e.querySelectorAll('input[type="checkbox"]');return Array.from(t).reduce(((e,t)=>e+(t.checked?1:0)),0)+2}()}" class="text-center align-items-center" style="height: 20rem;">\n                <div id="spinner" class="spinner"> </div>\n            </td>\n        </tr>\n    `}function r(e,t){var n,o;let r={};e.querySelectorAll('input:not([type="hidden"]), select').forEach((e=>{const t=e.name||e.id;if(t)if(e instanceof HTMLSelectElement)if(e.multiple){let n=Array.from(e.selectedOptions).map((e=>e.value));r[t]=n}else r[t]=e.value;else e instanceof HTMLInputElement&&("checkbox"===e.type?e.checked&&(Array.isArray(r[t])||(r[t]=[]),r[t].push(e.value)):"radio"===e.type?e.checked&&(r[t]=e.value):r[t]=e.value)}));for(const e in r)if(Array.isArray(r[e])&&1===r[e].length&&(r[e]=r[e][0]),Array.isArray(r[e])){const t=Array.from(new Set(r[e]));r[e]=1===t.length?t[0]:t}r.PageNumberVaulue=null!==(o=null===(n=t.match(/^\d+/))||void 0===n?void 0:n[0])&&void 0!==o?o:"1";const a=document.querySelector("label.switchTableType input[type='checkbox']");return a&&(r=function(e,t){console.log("FUNCTION: getPartialViewName");const n=t.checked,o=n?"_PlanetarySystemTable":"_PlanetarySystemTableInGroups";return e.PartialViewName=o,e}(r,a)),console.log("serializeForm (after): ",r),r}function a(e,t,a){return n(this,arguments,void 0,(function*(e,t,n,a="1"){console.log(`FUNCTOIN: submitFormAndUpdatePartial(form: ${e}, url: ${t}, partialSelector: ${n}, pageNumber: ${a}!!!`);const i=document.querySelector(n),l=document.getElementById("paginationBodyBlockContainer");let c=document.getElementById("catalogTableBody");const s=r(e,a);try{console.log("Adding spinnerHTML.");const e=document.getElementById("spinnerTr");e&&e.remove(),c&&c.insertAdjacentHTML("afterbegin",o());const r=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=yield r.json();if(console.log("Fetched data:",a),a.redirectTo)return console.log("Redirecting to:",a.redirectTo),void(window.location.href=a.redirectTo);i&&a.tableHtml?i.innerHTML=a.tableHtml:console.error(`Partial container with selector "${n}" not found.`),l&&a.paginationHtml?l.innerHTML=a.paginationHtml:console.error('Partial container with selector "paginationBodyBlockContainer" not found.')}catch(e){console.error("Error submitting form or updating partial:",e);try{const e=`/Error/Exception?errorMessage=${encodeURIComponent("An unexpected error occurred on the server. The server did not return a response. Please try again later or contact support.")}`;window.location.href=e}catch(e){document.body.innerHTML='\n                <div style="font-family: Arial, sans-serif; padding: 40px; text-align: center;">\n                    <h1 style="color: #d9534f;">Oops! Something went wrong.</h1>\n                    <p style="font-size: 18px;">An unexpected error occurred on the server.<br>\n                    The server did not return a response.<br>\n                    Please try again later or contact support.</p>\n                    <button onclick="location.reload()">Try Again</button>\n                </div>\n            '}}finally{const e=document.getElementById("spinnerTr");e&&e.remove()}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.createSpinnerHTML=o,t.serializeForm=r,window.__formHandlerInitialized||(window.__formHandlerInitialized=!0,document.addEventListener("DOMContentLoaded",(()=>{console.log("astronomicCatalogFormHandler initialized"),document.addEventListener("click",(e=>{const t=e.target,n=t.classList.contains("paginationCell"),o=t.classList.contains("applyFiltersBtn");if(n||o){const e=t.getAttribute("data-controller");e&&function(e,t){var n;const o=document.querySelector(".topMenuFiltersCatalogs");if(!o)return;console.log(o);let r="1";t&&(r=(null===(n=t.textContent)||void 0===n?void 0:n.trim())||"1"),"NGCICOpendatasofts"===e&&a(o,"/Catalogs/NGCICOpendatasofts/Index","#sizeFilterTable",r),"CollinderCatalogs"===e&&a(o,"/Catalogs/CollinderCatalogs/Index","#sizeFilterTable",r),"PlanetsCatalog"===e&&a(o,"/Planetology/PlanetsCatalog/Index","#sizeFilterTable",r),"PlanetarySystem"===e&&a(o,"/Planetology/PlanetarySystem/Index","#sizeFilterTable",r)}(e,n?t:null)}}))})))}})[924](0,{})})();