(()=>{"use strict";({924:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function r(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,i)}s((n=n.apply(e,t||[])).next())}))};function n(){return`\n        <tr id="spinnerTr">\n            <td colspan="${function(){const e=document.querySelector(".fieldsCheckBoks");if(!e)return 0;const t=e.querySelectorAll('input[type="checkbox"]');return Array.from(t).reduce(((e,t)=>e+(t.checked?1:0)),0)+2}()}" class="text-center align-items-center" style="height: 20rem;">\n                <div id="spinner" class="spinner"> </div>\n            </td>\n        </tr>\n    `}function a(e,t){var o,n;let a={};e.querySelectorAll('input:not([type="hidden"]), select').forEach((e=>{const t=e.name||e.id;if(t)if(e instanceof HTMLSelectElement)if(e.multiple){let o=Array.from(e.selectedOptions).map((e=>e.value));a[t]=o}else a[t]=e.value;else e instanceof HTMLInputElement&&("checkbox"===e.type?e.checked&&(Array.isArray(a[t])||(a[t]=[]),a[t].push(e.value)):"radio"===e.type?e.checked&&(a[t]=e.value):a[t]=e.value)}));for(const e in a)if(Array.isArray(a[e])&&1===a[e].length&&(a[e]=a[e][0]),Array.isArray(a[e])){const t=Array.from(new Set(a[e]));a[e]=1===t.length?t[0]:t}if("true"===sessionStorage.getItem("isSysVisualization"))a=l(a,null);else{const e=document.querySelector("label.switchTableType input[type='checkbox']");e&&(a=l(a,e))}return a.PageNumberVaulue=null!==(n=null===(o=t.match(/^\d+/))||void 0===o?void 0:o[0])&&void 0!==n?n:"1",console.log("serializeForm (after): ",a),a}function l(e,t){console.log("FUNCTION: getPartialViewName");const o="true"===sessionStorage.getItem("isSysVisualization");return o?(console.log(`  >>> IS VISUALIZATION: ${o}`),e.PartialViewName="_PlanetarySystemTableInGroups"):t&&(console.log(`  >>> IS VISUALIZATION: ${o}`),e.PartialViewName=t.checked?"_PlanetarySystemTable":"_PlanetarySystemTableInGroups"),console.log(`PartialViewName: ${e.PartialViewName}`),e}function r(e,t,l){return o(this,arguments,void 0,(function*(e,t,o,l="1",r){var i,s;console.log(`FUNCTOIN: submitFormAndUpdatePartial(form: ${e}, url: ${t}, partialSelector: ${o}, pageNumber: ${l}!!!`);const c=document.querySelector(o),u=document.getElementById("paginationBodyBlockContainer"),d=document.querySelector(".platetarySystemVisualization");let g,y=document.getElementById("catalogTableBody");if(e)console.log("  >>>  FORM IS NOT NULL"),g=a(e,l);else{console.log("  >>>  FORM IS NULL");const e=Object.assign({},null!=r?r:{});e.PartialViewName="_PlanetarySystemTableInGroups",e.PageNumberVaulue=null!==(s=null===(i=l.match(/^\d+/))||void 0===i?void 0:i[0])&&void 0!==s?s:"1",g=e}try{console.log("Adding spinnerHTML.");const e=document.getElementById("spinnerTr");e&&e.remove(),y&&y.insertAdjacentHTML("afterbegin",n()),console.log(`JSON argument: ${JSON.stringify(g)}`);const a=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!a.ok)throw console.log(`4. Check for success. response.ok = ${a.ok}`),new Error(`HTTP error! status: ${a.status}`);const l=yield a.json();if(console.log("Fetched data:",l),l.redirectTo)return console.log("Redirecting to:",l.redirectTo),void(window.location.href=l.redirectTo);c&&l.tableHtml?(c.innerHTML=l.tableHtml,d&&d.setAttribute("data-parameters",JSON.stringify(g))):console.error(`Partial container with selector "${o}" not found.`),u?u.innerHTML=l.paginationHtml:console.error('Partial container with selector "paginationBodyBlockContainer" not found.')}catch(e){console.error("Error submitting form or updating partial:",e);try{const e=`/Error/Exception?errorMessage=${encodeURIComponent("An unexpected error occurred on the server. The server did not return a response. Please try again later or contact support.")}`;window.location.href=e}catch(e){document.body.innerHTML='\n                <div style="font-family: Arial, sans-serif; padding: 40px; text-align: center;">\n                    <h1 style="color: #d9534f;">Oops! Something went wrong.</h1>\n                    <p style="font-size: 18px;">An unexpected error occurred on the server.<br>\n                    The server did not return a response.<br>\n                    Please try again later or contact support.</p>\n                    <button onclick="location.reload()">Try Again</button>\n                </div>\n            '}}finally{const e=document.getElementById("spinnerTr");e&&e.remove()}}))}function i(e,t,o){var n;const a=document.querySelector(".topMenuFiltersCatalogs");if(!a&&!o)return;const l=(null===(n=null==t?void 0:t.textContent)||void 0===n?void 0:n.trim())||"1";console.log(`updateCatalogData(form = ${a}, pageNumber = ${l}): `),"NGCICOpendatasofts"===e&&(console.log("  >>> catalog === 'NGCICOpendatasofts'"),r(a,"/Catalogs/NGCICOpendatasofts/Index","#sizeFilterTable",l)),"CollinderCatalogs"===e&&(console.log("  >>> catalog === 'CollinderCatalogs'"),r(a,"/Catalogs/CollinderCatalogs/Index","#sizeFilterTable",l)),"PlanetsCatalog"===e&&(console.log("  >>> catalog === 'PlanetsCatalog'"),r(a,"/Planetology/PlanetsCatalog/Index","#sizeFilterTable",l)),"PlanetarySystem"===e&&(console.log("  >>> catalog === 'PlanetarySystem'"),r(a,"/Planetology/PlanetarySystem/Index","#sizeFilterTable",l)),"PlanetarySystem_Visualization"===e&&(console.log("  >>> catalog === 'PlanetarySystem_Visualization'"),r(null,"/Planetology/PlanetarySystem/PlanetarySystemVisualization","#sizeFilterTable",l,o))}Object.defineProperty(t,"__esModule",{value:!0}),t.createSpinnerHTML=n,t.serializeForm=a,sessionStorage.getItem("isSysVisualization"),window.__formHandlerInitialized||(window.__formHandlerInitialized=!0,document.addEventListener("DOMContentLoaded",(()=>{sessionStorage.setItem("isSysVisualization",String(!1)),console.log("FUNCTION: astronomicCatalogFormHandler initialized"),document.addEventListener("click",(e=>{const t=e.target;if(!t)return;console.log("############"),console.log("FUNCTION: astronomicCatalogFormHandler - CLICK AT:"),console.log((new Date).toLocaleString());const o=t.closest(".platetarySystemVisualization"),n=t.classList.contains("applyFiltersBtn");let l=t.getAttribute("data-controller");const r="true"===sessionStorage.getItem("isSysVisualization");console.log("ðŸ” isSysVisualization (before toggle):",r);const s=t.classList.contains("paginationCell"),c=document.querySelector(".paginationBodyBlock .currentPage"),u=s?t:c;if(n||s&&!r)console.log(" >>>  filterBtn || (paginationCell && !isSysVisualization)"),i(l,u);else if(o||s&&r){let e,o,n;console.log(" >>>  plSysVisualizationBtn || (paginationCell && isSysVisualization)"),s||(e=function(){const e=!("true"===sessionStorage.getItem("isSysVisualization"));return sessionStorage.setItem("isSysVisualization",String(e)),e}()),console.log(`ðŸ” Toggle: isSysVisualization = ${e}`),e?(l+="_Visualization",o=t.getAttribute("data-parameters"),console.log("data-parameters =",o),n=function(e){let t={};if(e&&"null"===e){console.log("âš ï¸ First load of the _PlanetarySystemVisualizationBase page'");const e=document.querySelector(".topMenuFiltersCatalogs");if(!e)return;t=a(e,"0")}else try{t=JSON.parse(e),console.log("âœ… dataParams is valid.")}catch(e){console.error("â›” Invalid JSON in data-parameters:",e)}return t}(o),console.log(`Controller: ${l}`),i(l,u,n)):(console.log(`Controller: ${l}`),i(l,u,n))}s&&console.log(" >>>  paginationCell  IS TRUE")}))})))}})[924](0,{})})();