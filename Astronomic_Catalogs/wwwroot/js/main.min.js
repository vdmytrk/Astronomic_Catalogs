(()=>{"use strict";(()=>{function e(){console.log("FUNCTION: updateFixedColumnLeftOffset()");let e=0;const t=.1*parseFloat(getComputedStyle(document.documentElement).fontSize);let o=0;for(let n=1;n<=2;n++){const l=document.querySelectorAll(`th:nth-child(${n}), td:nth-child(${n})`);if(l.length>0){const n=l[0].offsetWidth;e+=n,l.forEach((t=>{t.style.left=e-n-o+"px"})),o+=t}}}function t(){console.log("FUNCTION: adjustTableSize()");const e=document.querySelector(".toFixLayoutHeader");e||console.log("ATTENTION!!!The header variable is null!");const t=document.querySelector("footer");t||console.log("ATTENTION!!! The footer variable is null!");const o=document.querySelector(".main-RenderBody-container");o||console.log("ATTENTION!!! The main variable is null!");const n=document.querySelector(".table-set-size");n||console.log("ATTENTION!!! The tableContainer variable is null!");const l=document.querySelector(".planetCatalogHeader");l||console.log("ATTENTION!!! The pageContent variable is null!"),n&&e&&t&&o&&l&&requestAnimationFrame((()=>{const a=window.innerHeight,r=window.innerWidth,i=e.offsetHeight,d=t.offsetHeight,s=getComputedStyle(o),c=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),u=parseFloat(s.marginTop)+parseFloat(s.marginBottom),m=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),g=parseFloat(s.marginLeft)+parseFloat(s.marginRight),E=l.offsetHeight,f=parseFloat(getComputedStyle(document.documentElement).fontSize),p=0*f,T=a-(i+d+c+u+E+p+6*f),h=r-(m+g+p);console.log({emInPixels:f,windowWidth:r,windowHeight:a,headerHeight:i,footerHeight:d,mainPaddingV:c,mainMarginV:u,mainPaddingH:m,mainMarginH:g,pageContentH:E,tableHeight:T,tableWidth:h}),n.style.height=`${T}px`,n.style.width=`${h}px`}))}document.addEventListener("DOMContentLoaded",(()=>{function o(e){e.target.closest("#restrictedDiv, #restrictedDiv *")&&r("Filters are unavailable for unregistered users. Please sign in.")}console.log("GLOBAL SCOPE"),document.querySelectorAll("select.form-select").forEach((e=>{let t=new Set;for(let o of Array.from(e.options))(o.hasAttribute("selected")||o.selected)&&(t.add(o.value),o.selected=!0,o.classList.add("selected-fix"));e.addEventListener("change",(function(){for(let o of Array.from(e.options))o.selected?(t.add(o.value),o.classList.add("selected-fix")):(t.delete(o.value),o.classList.remove("selected-fix"))})),e.addEventListener("mousedown",(function(e){e.preventDefault();let o=e.target;if("OPTION"===o.tagName){let e=o;t.has(e.value)?(t.delete(e.value),e.selected=!1,e.classList.remove("selected-fix")):(t.add(e.value),e.selected=!0,e.classList.add("selected-fix"))}return!1}))})),function(){const e=document.getElementById("restrictedDiv");e&&(void 0===window.isAuthenticated||window.isAuthenticated||(e.classList.add("disabled-container"),document.addEventListener("click",o)))}(),e(),t()})),window.addEventListener("resize",(function(){e(),t()}));const o=new ResizeObserver((()=>t())),n=document.querySelector(".toFixLayoutHeader"),l=document.querySelector("footer"),a=document.querySelector(".main-RenderBody-container");function r(e){const t="dark"===localStorage.getItem("theme");"undefined"!=typeof Swal&&Swal.fire?Swal.fire({title:"Attention!",text:e,icon:"info",background:t?"#414243":"white",color:t?"red":"black",confirmButtonColor:t?"red":"blue",confirmButtonText:"OK"}):alert(e)}n&&o.observe(n),l&&o.observe(l),a&&o.observe(a),window.fetchDateUsingADO=function(){$.ajax({url:"/Admin/HomeAdmin/GetDateFromProcedureADO",type:"GET"}).done((e=>r(e))).fail((e=>{r("ADO. THERE ARE SOME ISSUES ON THE SERVER! PLEASE CONTACT THE ADMINISTRATION."),console.log(e)})).always((()=>console.log("Request execution completed!")))},window.fetchDateUsingEF=function(){$.ajax({url:"/Admin/HomeAdmin/GetDateFromProcedureEF",type:"GET"}).done((e=>r(e))).fail((e=>{r("EF. THERE ARE SOME ISSUES ON THE SERVER! PLEASE CONTACT THE ADMINISTRATION."),console.log(e)}))},window.executeCreateNewDateProcedure=function(){$.ajax({url:"/Admin/HomeAdmin/CallCreateNewDateProcedure",type:"GET"}).done((e=>{$("#dataTableContainer").html(e)})).fail((()=>{r("AN ERROR OCCURRED WHEN THE CallCreateNewDateProcedure WAS CALLED. THERE ARE SOME ISSUES ON THE SERVER! PLEASE CONTACT THE ADMINISTRATION.")}))};const i=crypto.randomUUID(),d=(new signalR.HubConnectionBuilder).withUrl(`/progresshub?jobId=${i}`).build();let s=null,c=!1;function u(){const e=document.getElementById("importPlanetDataButton"),t=document.getElementById("progressContainer"),o=document.getElementById("importProgress"),n=document.getElementById("stopImportingPlanetDataButton");e.disabled=!1,t.style.display="none",o.style.width="0%",o.innerText="0%",n.disabled=!0,n.style.display="none",c=!1,s=null,fetch("/Planets/PlanetsCatalog/GetPlanetsTable").then((e=>e.text())).then((e=>{document.getElementById("planetsTableContainer").innerHTML=e})).catch((e=>console.error("Error updating table:",e)))}d.start().catch((e=>console.error(e.toString()))),d.on("ReceiveProgress",(e=>{const t=document.getElementById("importProgress");t.style.width=e+"%",t.innerText=e+"%",e>=100&&u()})),window.startImport=function(){if(c)return;c=!0,s=new AbortController;const e=document.getElementById("importPlanetDataButton"),t=document.getElementById("progressContainer"),o=document.getElementById("stopImportingPlanetDataButton");e.disabled=!0,t.style.display="block",o.disabled=!1,o.style.display="inline-block",fetch(`/Planets/PlanetsCatalog/ImportData_OpenXml?jobId=${i}`,{method:"POST",signal:s.signal}).then((e=>{(e.ok||499===e.status)&&u()})).catch((e=>{"AbortError"===e.name?console.log("Import aborted by user"):console.error("Import error:",e),u()}))},window.stopImport=function(){s&&s.abort(),fetch(`/Planets/PlanetsCatalog/CancelImport?jobId=${i}`,{method:"POST"}),u()}})()})();