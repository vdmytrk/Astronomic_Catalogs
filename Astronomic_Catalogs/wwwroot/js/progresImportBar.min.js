(()=>{"use strict";(()=>{let t;document.addEventListener("DOMContentLoaded",o);let e=null,n=!1;function o(){const o=document.getElementById("importPlanetDataButton"),a=document.getElementById("stopImportingPlanetDataButton");var d;!function(){t=crypto.randomUUID();const e=(new signalR.HubConnectionBuilder).withUrl(`/progresshub?jobId=${t}`).build();e.start().catch((t=>{})),e.on("ReceiveProgress",(t=>{const e=document.getElementById("importProgress");e.style.width=t+"%",e.innerText=t+"%",t>=100&&l()}))}(),(d=o)&&d.addEventListener("click",(()=>{if(n)return;n=!0,e=new AbortController;const o=document.getElementById("importPlanetDataButton"),a=document.getElementById("progressContainer"),d=document.getElementById("stopImportingPlanetDataButton");o.disabled=!0,a.style.display="block",d.disabled=!1,d.style.display="inline-block",fetch(`/Planetology/PlanetsCatalog/ImportData_OpenXml?jobId=${t}`,{method:"POST",signal:e.signal}).then((t=>{(t.ok||499===t.status)&&l()})).catch((t=>{t.name,l()}))})),function(n){n&&n.addEventListener("click",(()=>{e&&e.abort(),fetch(`/Planetology/PlanetsCatalog/CancelImport?jobId=${t}`,{method:"POST"}),l()}))}(a)}function l(){const t=document.getElementById("stopImportingPlanetDataButton"),o=document.getElementById("importPlanetDataButton"),l=document.getElementById("progressContainer"),a=document.getElementById("importProgress");o.disabled=!1,l.style.display="none",a.style.width="0%",a.innerText="0%",t.disabled=!0,t.style.display="none",n=!1,e=null,fetch("/Planetology/PlanetsCatalog/Index",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({PageNumberValue:1,RowOnPageCatalog:30})}).then((t=>t.json())).then((t=>{const e=document.getElementById("planetsTableContainer");t.tableHtml&&(e.innerHTML=t.tableHtml)})).catch((t=>{}))}})()})();