(()=>{"use strict";var e={538:(e,t)=>{function o(){document.addEventListener("click",(e=>{console.log("FUNCTION: setupShowFiltersToggles");const t=e.target,o="true"===sessionStorage.getItem("isSysVisualization"),n=document.querySelector(".allTopMenuFilters"),i=document.querySelector(".hideFilters");if(!n||!i)return;t.classList.contains("hideFilters")?(()=>{const e=n.classList.toggle("collapsed");i&&(i.textContent=e?"Show filters":"Hide filters")})():t.classList.contains("platetarySystemVisualization")&&(()=>{console.log(`🔁 setupShowFiltersToggles: isVisualization = ${o}`),i.classList.toggle("d-none",!o),n.classList.toggle("collapsed",!o);const e=n.classList.contains("collapsed");console.log(`isCollapsed = ${e}`),t.textContent=e?"HIDE PLANETARY SYSTEMS VISUALIZATION":"SHOW PLANETARY SYSTEMS VISUALIZATION"})()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){document.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("showTextBlockBtn")){const e=t.closest("div");if(!e)return;const o=e.parentElement;if(!o)return;const n=o.querySelector(".hiddenBlock");if(!n)return;const i=n.classList.toggle("collapsed");t.textContent=i?"Show":"Hide"}})),o(),function(){const e=document.querySelector(".chb-habitableZonePlanets"),t=document.querySelector(".chb-terrestrialHabitableZonePlanets");if(!e||!t)return;const o=()=>{e.checked?(t.disabled=!1,t.classList.remove("disabled-opacity")):(t.disabled=!0,t.checked=!1,t.classList.add("disabled-opacity"))};o(),e.addEventListener("change",o)}(),function(){const e=document.querySelector(".chb-PlanetWithSize"),t=document.querySelector("#planetTypeSelect"),o=document.querySelector(".chooseWhichPlanetSizes");if(!e||!t||!o)return;const n=()=>{if(e.checked)t.disabled=!1,o.classList.remove("disabled-opacity");else{t.disabled=!0,t.selectedIndex=-1;t.querySelectorAll("option").forEach((e=>e.classList.remove("selected-fix"))),o.classList.add("disabled-opacity")}};n(),e.addEventListener("change",n)}()},t.setupShowFiltersToggles=o,t.hideShowBlockDownAnime=function(e,t,o=0){if(!e)return;setTimeout((()=>{t?e.classList.remove("collapsed"):e.classList.add("collapsed")}),o)}},558:function(e,t,o){var n,i=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var i=Object.getOwnPropertyDescriptor(t,o);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,i)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[t.length]=o);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o=n(e),a=0;a<o.length;a++)"default"!==o[a]&&i(t,e,o[a]);return l(t,e),t}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=a(o(924)),c=o(538);document.addEventListener("DOMContentLoaded",(()=>{!function(){console.log("FUNCTION: switchTable");const e=document.querySelector("label.switchTableType input[type='checkbox']");if(!e)return;e.addEventListener("change",(()=>r(this,void 0,void 0,(function*(){!function(e){var t;const o=document.getElementById("twoPlanetarySystemTable");if(!o)return;const n=document.querySelector(".topMenuFiltersCatalogs");if(!n)return;console.log(n);let i="1";const l=document.querySelector(".paginationBodyBlock .currentPage");l&&(i=(null===(t=l.textContent)||void 0===t?void 0:t.trim())||i);const a=e.checked;!function(e,t,o,n){r(this,arguments,void 0,(function*(e,t,o,n,i="1"){console.log(`FUNCTOIN: submitFormAndUpdatePartial (SwitchTable)_(form: ${e}, url: ${t}, container: ${o}, pageNumber: ${i}!!!`);let l=document.getElementById("catalogTableBody");const a=s.serializeForm(e,i);try{console.log("Adding spinnerHTML.");const e=document.getElementById("spinnerTr");e&&e.remove(),l&&l.insertAdjacentHTML("afterbegin",s.createSpinnerHTML());const i=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok)throw new Error(`HTTP error! Failed to load table. Status: ${i.status}`);let r,c=!1;const d=i.headers.get("content-type");if(d&&d.includes("application/json")?(r=yield i.json(),c=!0):r=yield i.text(),console.log("Fetched data:",r),r.redirectTo)return console.log("Redirecting to:",r.redirectTo),void(window.location.href=r.redirectTo);o.innerHTML=n?`<div id="planetsSystemTableContainer" class="hideShowColumnTable p-3">${r}</div>`:`<div id="planetsInGroupsSystemTableContainer" class="p-3">${r}</div>`}catch(e){o.innerHTML="<div class='text-danger p-3'>Error loading data</div>",console.error("Error submitting form or updating partial:",e)}finally{const e=document.getElementById("spinnerTr");e&&e.remove()}}))}(n,a?"/Planetology/PlanetarySystem/GetFlatTable":"/Planetology/PlanetarySystem/GetGroupedTable",o,a,i);const d=document.querySelector(".fieldsCheckBoksBlock");a?(0,c.hideShowBlockDownAnime)(d,!0,2):(0,c.hideShowBlockDownAnime)(d,!1,2)}(e)}))))}()}))},924:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))};function n(){return`\n        <tr id="spinnerTr">\n            <td colspan="${function(){const e=document.querySelector(".fieldsCheckBoks");if(!e)return 0;const t=e.querySelectorAll('input[type="checkbox"]');return Array.from(t).reduce(((e,t)=>e+(t.checked?1:0)),0)+2}()}" class="text-center align-items-center" style="height: 20rem;">\n                <div id="spinner" class="spinner"> </div>\n            </td>\n        </tr>\n    `}function i(e,t){var o,n;let i={};e.querySelectorAll('input:not([type="hidden"]), select').forEach((e=>{const t=e.name||e.id;if(t)if(e instanceof HTMLSelectElement)if(e.multiple){let o=Array.from(e.selectedOptions).map((e=>e.value));i[t]=o}else i[t]=e.value;else e instanceof HTMLInputElement&&("checkbox"===e.type?e.checked&&(Array.isArray(i[t])||(i[t]=[]),i[t].push(e.value)):"radio"===e.type?e.checked&&(i[t]=e.value):i[t]=e.value)}));for(const e in i)if(Array.isArray(i[e])&&1===i[e].length&&(i[e]=i[e][0]),Array.isArray(i[e])){const t=Array.from(new Set(i[e]));i[e]=1===t.length?t[0]:t}if("true"===sessionStorage.getItem("isSysVisualization"))i=l(i,null);else{const e=document.querySelector("label.switchTableType input[type='checkbox']");e&&(i=l(i,e))}return i.PageNumberVaulue=null!==(n=null===(o=t.match(/^\d+/))||void 0===o?void 0:o[0])&&void 0!==n?n:"1",console.log("serializeForm (after): ",i),i}function l(e,t){console.log("FUNCTION: getPartialViewName");const o="true"===sessionStorage.getItem("isSysVisualization");return o?(console.log(`  >>> IS VISUALIZATION: ${o}`),e.PartialViewName="_PlanetarySystemVisualizationBase"):t&&(console.log(`  >>> IS VISUALIZATION: ${o}`),e.PartialViewName=t.checked?"_PlanetarySystemTable":"_PlanetarySystemTableInGroups"),console.log(`PartialViewName: ${e.PartialViewName}`),e}function a(e,t,l){return o(this,arguments,void 0,(function*(e,t,o,l="1",a){var r,s;console.log(`FUNCTOIN: submitFormAndUpdatePartial(form: ${e}, url: ${t}, partialSelector: ${o}, pageNumber: ${l}!!!`);const c=document.querySelector(o),d=document.getElementById("paginationBodyBlockContainer"),u=document.querySelector(".platetarySystemVisualization");let g,y=document.getElementById("catalogTableBody");if(e)console.log("  >>>  FORM IS NOT NULL"),g=i(e,l);else{console.log("  >>>  FORM IS NULL");const e=Object.assign({},null!=a?a:{});e.PartialViewName="_PlanetarySystemVisualizationBase",e.PageNumberVaulue=null!==(s=null===(r=l.match(/^\d+/))||void 0===r?void 0:r[0])&&void 0!==s?s:"1",g=e}try{console.log("Adding spinnerHTML.");const e=document.getElementById("spinnerTr");e&&e.remove(),y&&y.insertAdjacentHTML("afterbegin",n()),console.log(`JSON argument: ${JSON.stringify(g)}`);const i=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!i.ok)throw console.log(`4. Check for success. response.ok = ${i.ok}`),new Error(`HTTP error! status: ${i.status}`);const l=yield i.json();if(console.log("Fetched data:",l),l.redirectTo)return console.log("Redirecting to:",l.redirectTo),void(window.location.href=l.redirectTo);c&&l.tableHtml?(c.innerHTML=l.tableHtml,u&&u.setAttribute("data-parameters",JSON.stringify(g))):console.error(`Partial container with selector "${o}" not found.`),d?d.innerHTML=l.paginationHtml:console.error('Partial container with selector "paginationBodyBlockContainer" not found.')}catch(e){console.error("Error submitting form or updating partial:",e);try{const e=`/Error/Exception?errorMessage=${encodeURIComponent("An unexpected error occurred on the server. The server did not return a response. Please try again later or contact support.")}`;window.location.href=e}catch(e){document.body.innerHTML='\n                <div style="font-family: Arial, sans-serif; padding: 40px; text-align: center;">\n                    <h1 style="color: #d9534f;">Oops! Something went wrong.</h1>\n                    <p style="font-size: 18px;">An unexpected error occurred on the server.<br>\n                    The server did not return a response.<br>\n                    Please try again later or contact support.</p>\n                    <button onclick="location.reload()">Try Again</button>\n                </div>\n            '}}finally{const e=document.getElementById("spinnerTr");e&&e.remove()}}))}function r(e,t,o){var n;const i=document.querySelector(".topMenuFiltersCatalogs");if(!i&&!o)return;const l=(null===(n=null==t?void 0:t.textContent)||void 0===n?void 0:n.trim())||"1";console.log(`updateCatalogData(form = ${i}, pageNumber = ${l}): `),"NGCICOpendatasofts"===e&&(console.log("  >>> catalog === 'NGCICOpendatasofts'"),a(i,"/Catalogs/NGCICOpendatasofts/Index","#sizeFilterTable",l)),"CollinderCatalogs"===e&&(console.log("  >>> catalog === 'CollinderCatalogs'"),a(i,"/Catalogs/CollinderCatalogs/Index","#sizeFilterTable",l)),"PlanetsCatalog"===e&&(console.log("  >>> catalog === 'PlanetsCatalog'"),a(i,"/Planetology/PlanetsCatalog/Index","#sizeFilterTable",l)),"PlanetarySystem"===e&&(console.log("  >>> catalog === 'PlanetarySystem'"),a(i,"/Planetology/PlanetarySystem/Index","#sizeFilterTable",l)),"PlanetarySystem_Visualization"===e&&(console.log("  >>> catalog === 'PlanetarySystem_Visualization'"),a(null,"/Planetology/PlanetarySystem/PlanetarySystemVisualization","#sizeFilterTable",l,o))}Object.defineProperty(t,"__esModule",{value:!0}),t.createSpinnerHTML=n,t.serializeForm=i,sessionStorage.getItem("isSysVisualization"),window.__formHandlerInitialized||(window.__formHandlerInitialized=!0,document.addEventListener("DOMContentLoaded",(()=>{sessionStorage.setItem("isSysVisualization",String(!1)),console.log("FUNCTION: astronomicCatalogFormHandler initialized"),document.addEventListener("click",(e=>{const t=e.target;if(!t)return;console.log("############"),console.log("FUNCTION: astronomicCatalogFormHandler - CLICK AT:"),console.log((new Date).toLocaleString());const o=t.closest(".platetarySystemVisualization"),n=t.classList.contains("applyFiltersBtn");let l=t.getAttribute("data-controller");const a="true"===sessionStorage.getItem("isSysVisualization");console.log("🔁 isSysVisualization (before toggle):",a);const s=t.classList.contains("paginationCell"),c=document.querySelector(".paginationBodyBlock .currentPage"),d=s?t:c;if(n||s&&!a)console.log(" >>>  filterBtn || (paginationCell && !isSysVisualization)"),r(l,d);else if(o||s&&a){let e,o,n;console.log(" >>>  plSysVisualizationBtn || (paginationCell && isSysVisualization)"),s||(e=function(){const e=!("true"===sessionStorage.getItem("isSysVisualization"));return sessionStorage.setItem("isSysVisualization",String(e)),e}()),console.log(`🔁 Toggle: isSysVisualization = ${e}`),e?(l+="_Visualization",o=t.getAttribute("data-parameters"),console.log("data-parameters =",o),n=function(e){let t={};if(e&&"null"===e){console.log("⚠️ First load of the _PlanetarySystemVisualizationBase page'");const e=document.querySelector(".topMenuFiltersCatalogs");if(!e)return;t=i(e,"0")}else try{t=JSON.parse(e),console.log("✅ dataParams is valid.")}catch(e){console.error("⛔ Invalid JSON in data-parameters:",e)}return t}(o),console.log(`Controller: ${l}`),r(l,d,n)):(console.log(`Controller: ${l}`),r(l,d,n))}s&&console.log(" >>>  paginationCell  IS TRUE")}))})))}},t={};(function o(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports})(558)})();